include pages/mixins/topNav.pug
include pages/mixins/header.pug
include pages/mixins/socialLinks.pug

block vars
  -var pageTitle = "Mike Carter | Software developer & founder | UK"
  -var metaTitle = "Mike Carter"
  -var metaType = "website"
  -var metaDescription = "A software developer, company founder and technical leader from the UK."
  -var metaUrl = "https://mcarter.me"
  -var metaImage = "https://mcarter.me/assets/images/me.jpg"
  -var isBlogPost = false

doctype html
html(lang="en-GB")
  head
    script.
      (function(){var t=localStorage.getItem('theme');if(t)document.documentElement.setAttribute('data-theme',t);})();
    meta(charset='utf-8')
    link(rel='shortcut icon' href='/favicon.ico' type='image/x-icon')
    link(rel='icon' href='/favicon.ico' type='image/x-icon')
    link(rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png")
    link(rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png")
    link(rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png")
    link(rel="manifest" href="/site.webmanifest")
    link(rel="alternate" type="application/rss+xml" title="Subscribe for posts on web applications development and making a living as a solo developer." href="https://mcarter.me/rss.xml")
    meta(name='description' content=metaDescription)
    meta(property='og:url' content=metaUrl)
    meta(property='og:type' content=metaType)
    meta(property='og:title' content=metaTitle)
    meta(property='og:image' content=metaImage)
    meta(property='og:description' content=metaDescription)
    meta(name='twitter:title' content=metaTitle)
    meta(name='twitter:image' content=metaImage)
    meta(name='twitter:description' content=metaDescription)
    meta(name='twitter:card' content='summary')
    meta(name='twitter:site' content='@mcarterj')
    meta(name='twitter:creator' content='@mcarterj')
    meta(name='author' content='Mike Carter')
    meta(name='theme-color' content='#000000')
    meta(name='viewport' content='width=device-width,initial-scale=1,shrink-to-fit=no')
    link(rel="preconnect" href="https://fonts.googleapis.com")
    link(rel="preconnect" href="https://fonts.gstatic.com" crossorigin)
    link(href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,200..900;1,200..900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet")
    link(rel='stylesheet' type='text/css' href='/assets/styles/main.css' media='screen')
    link(rel='canonincal' href=metaUrl)
    block cssIncludes

    title=pageTitle

  body
    .container
      +topNav()
      block pageContent
      footer.footer
        .footer__brand
          img.footer__photo(src="/assets/images/me.webp" alt="Mike Carter")
          p.footer__copyright &copy; 2026 Mike Carter
        +socialLinks("footer__social")
    script.
      (function(){
        if(window.__themeInit)return;
        window.__themeInit=true;
        var icons=document.querySelectorAll('.theme-icon');
        var btns=document.querySelectorAll('.top-nav__theme-toggle');
        function isDark(){
          var t=document.documentElement.getAttribute('data-theme');
          return t==='dark'||(t!=='light'&&window.matchMedia('(prefers-color-scheme:dark)').matches);
        }
        function updateIcons(){
          var src='/assets/images/icons/lightbulb-'+(isDark()?'off':'on')+'.svg';
          icons.forEach(function(ic){ic.src=src;});
        }
        updateIcons();
        btns.forEach(function(btn){
          btn.addEventListener('click',function(){
            var html=document.documentElement;
            var current=html.getAttribute('data-theme');
            var next=current==='dark'?'light':current==='light'?'dark':
              (window.matchMedia('(prefers-color-scheme:dark)').matches?'light':'dark');
            html.setAttribute('data-theme',next);
            localStorage.setItem('theme',next);
            updateIcons();
          });
        });
        var menu=document.getElementById('mobile-menu');
        var burger=document.querySelector('.top-nav__burger');
        if(menu){
          document.querySelectorAll('#mobile-menu a').forEach(function(a){
            a.addEventListener('click',function(){menu.hidePopover();});
          });
          menu.addEventListener('toggle',function(e){
            if(burger)burger.setAttribute('aria-expanded',e.newState==='open');
          });
        }
      })();
